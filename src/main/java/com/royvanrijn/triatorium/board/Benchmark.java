package com.royvanrijn.triatorium.board;

import com.royvanrijn.triatorium.Triatorium;
import com.royvanrijn.triatorium.bot.GreedyBot;
import com.royvanrijn.triatorium.bot.SmartBot;
import com.royvanrijn.triatorium.bot.TriatoriumBot;
import com.royvanrijn.triatorium.bot.genetic.WeightedBot;

import java.util.ArrayList;
import java.util.List;

public class Benchmark {

    private List<TriatoriumBot> bestBots = new ArrayList<>();

    public Benchmark() {

        bestBots.add(new SmartBot());
        bestBots.add(new GreedyBot());
        bestBots.add(new WeightedBot(
                "[0.8369505487315533, 0.8215734801222394, 0.48389412901822737, 0.7784907114292889, 0.3674979801958925, 0.3893406473276769, 0.8333741814499732, 0.7717897550585603, 0.8530578681550486, 0.11343951759750259, 0.6901631152211555, 0.6480604144020209, 0.8747911159045372, 0.36339851727448114, 0.12603385399193556, 0.47169546873625257, 0.037208990423472366, 0.004018754795769741, 0.33387438372655165, 0.660861172228261, 0.28429115917667025, 0.6013247192691443, 0.7224891862360815, 0.0013573860682100092, 0.19437809177237442, 0.2295930626888495, 0.40199212716284793, 0.4682010622885058, 0.710427850534751, 0.8129026683483398]",
                "[0.8241545828889129, 0.044483858652637376, 0.46478059680922246, 0.3814942969580467, 0.9225361893387662, 0.782689597331695, 0.6763694193970774, 0.748998148839426, 0.07150972099131558, 0.5126278794980866, 0.6864663815028196, 0.8720989475996557, 0.3167876712112553, 0.9770971229046644, 0.027146697630442307, 0.39708493196198635, 0.5405861906518392, 0.7091803663590369, 0.34602366681889607, 0.5397961854740735, 0.15084868713366173, 0.3518407884760898, 0.5367781720556202, 0.031669174121429444]"
                )
        );
        bestBots.add(new WeightedBot(
                "[0.4450574453251017, 0.29446569309031967, 0.3647147837829938, 0.677627891144254, 0.229306994498794, 0.20338448465778414, 0.6108694345214187, 0.7379105961979976, 0.7566222217965842, 0.12071437871649571, 0.2068747927179776, 0.988592050397096, 0.604083117290895, 0.14772415588084076, 0.06912068873713517, 0.5014771319940786, 0.9323048634770793, 0.7489643009060389, 0.6999528258499036, 0.18439663700863407, 0.6313519969462306, 0.32243473962176994, 0.7728301358543639, 0.8109085193178845, 0.5479593302146675, 0.21138095283062242, 0.5827258605734634, 0.6418314397742154, 0.1304898962940273, 0.36058953275463856]",
                "[0.4577382138689713, 0.048072135117361636, 0.48362679093895533, 0.13472385562607725, 0.6479926304512333, 0.9781262004142616, 0.6255708385016276, 0.9078361471763473, 0.04062759049089648, 0.07501384771490216, 0.36218691893454713, 0.3925598748141018, 0.8658091447178541, 0.8367619298914988, 0.3517472392869583, 0.711141450407855, 0.8738502467935066, 0.9739728724592326, 0.10241223812811884, 0.5782038975496108, 0.7609028061286937, 0.06758510822761554, 0.5990456665749565, 0.34877172717863125]"
                )
        );
        bestBots.add(new WeightedBot(
                "[0.5722405512748061, 0.5124071226441451, 0.29507949747296325, 0.1770777053572471, 0.22330580470497052, 0.12104378167226293, 0.40332055913699305, 0.7764960285197519, 0.8951617093628434, 0.16035674009405143, 0.6216466288959661, 0.5570372915106497, 0.4645959948906202, 0.36880444395736933, 0.24094002700802397, 0.3894271291686079, 0.29090244939128074, 0.18500409343256452, 0.4590285992000944, 0.3011779764762149, 0.6075696715782851, 0.43495869260033926, 0.8177668908899508, 0.6717871615314339, 0.32269554045108184, 0.2035000886892202, 0.3265397592717103, 0.8639391019033537, 0.4080403069855625, 0.013757209139246052]",
                "[0.3087204490456974, 0.08175159335289628, 0.27739814104112126, 0.272618589621086, 0.889425938176175, 0.9484135353673117, 0.22125782927941007, 0.9955635249251288, 0.21275253972610841, 0.3028965671635766, 0.5686962126582489, 0.6927225441589939, 0.3058769769705303, 0.9833178667994127, 0.08807493266833133, 0.09590589485383405, 0.6138820419744868, 0.4669482875724832, 0.17717720929510605, 0.8980886667042994, 0.06604097046153823, 0.09933243669469527, 0.19457403666901696, 0.6472585053800222]"
                )
        );

    }

    public List<TriatoriumBot> getBenchmark() {
        return bestBots;
    }

    public static void main(String[] args) {
        new Benchmark().runAll();
    }

    private void runAll() {
        Triatorium triatorium = new Triatorium();
        Board board = new Board();

        for(TriatoriumBot bot:getBenchmark()) {

            long totalScore = 0;

            for(TriatoriumBot inner:getBenchmark()) {

                for(int times = 0; times < 100; times++) {
                    triatorium.playGameWithBots(board, times%2, bot, inner);
                    int[] score = board.calculateScore();

                    totalScore += score[0];

                    board.reset();
                }
            }

            System.out.println("Bot: " + bot.getName() + " scores " + totalScore);
        }
    }
}
